<!-- ヘッダー -->
<%= render "shared/header" %>
<!-- ヘッダー -->

<!-- サイドバー -->
<% if user_signed_in? %>
  <%= render 'layouts/sidebar' %>
<% end %>
<!-- サイドバー -->

<!-- チャットの一覧表示 -->
<div class="chats-container">
  <% @chats.each do |chat| %>
    <div class="chat">
      <div class="chat-message">
        <!-- User name who posted the chat -->
        <p><%= chat.user.username %>さんが投稿しました</p>
        <!-- Message content -->
        <p class="message-content"><%= chat.message-content %></p>
        <!-- Post date -->
        <div class="chat-date">
          投稿日時: <%= chat.created_at.strftime("%Y-%m-%d %H:%M") %>
        </div>
        <!-- Delete button (if current user is the author) -->
        <% if chat.user == current_user %>
          <div class="action-buttons">
            <div class="delete-button">
              <%= link_to chat_path(chat), data: { turbo_method: :delete } do %>
                <%= image_tag('destroy-icon.png', alt: '削除', class: 'index-destroy-icon') %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
<!-- チャットの一覧表示 -->
<!-- メッセージ入力フォーム -->
<div class="chat-input-container">
  <%= form_with(model: @chat, url: chats_path, local: true, html: { class: 'chat-form' }) do |form| %>
    <div class="input-area">
      <%= form.text_area :message_content, placeholder: "メッセージを入力...", rows: 3, class: 'message-input' %>
      <%= form.submit "送 信", class: 'chat-button' %>
    </div>
  <% end %>
</div><!-- メッセージ入力フォーム -->